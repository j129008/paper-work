# 斷句程式交接文件

## 論文實驗資料夾以及其對應章節

| 資料夾             | 章節 |
| ------------------ | ---- |
| 文字前處理         | 4.2  |
| 斷句模型選擇       | 7.1  |
| 前後文範圍實驗     | 7.2  |
| 輔助特徵選擇       | 7.3  |
| 模型的資料量需求   | 7.4  |
| CRF的整合學習      | 7.5  |
| LSTM的模型結構     | 7.6  |
| CRF+LSTM的最佳整合 | 7.7  |

 ----------------------------------------------------------------------------------------------------------

## 程式碼、語料、模型存放資料夾

| 資料夾        | 用途         |
| ------------- | ------------ |
| basic_learner | 基礎模型     |
| data          | 語料檔案     |
| lib           | 函式庫       |
| pickles       | 儲存訓練模型 |
| ref           | 名詞表       |

 ----------------------------------------------------------------------------------------------------------

## 初次執行、重複執行程式須知

[ 腳本名稱 ].sh 檔案是本實驗的執行腳本檔案，將資料夾下的程式進行初步的設定，僅需要提供其輸入、輸出檔案的位置。

由於檔案腳本檔案已經設定成有執行權限，因此若是在腳本目錄底下可直接以「./[ 腳本名稱 ].sh」執行。

而每個腳本都代表一個實驗步驟，其詳細的參數設定可於腳本內調整，並且有參數用途的註解在內。

初次使用本程式須先執行「config.sh」。

若是重複執行實驗，可執行「clean.sh」清除舊實驗資料以避免資料混亂。

以下是本文件使用的markdown格式的程式碼區塊，執行初始化以及清理舊資料的腳本執行方法，範例如下：

```
./config.sh
./clean.sh
```

若是想要一次跑完整個實驗流程，可以使用「run.sh」進行完整的實驗腳本。

 ----------------------------------------------------------------------------------------------------------

## 文字前處理
### 統一符號

```
./text_preproc.sh [ 原始語料路徑 ] [ 斷句語料輸出路徑 ]
```
### 語料分割
```
text_split.sh [ 斷句語料路徑 ] [ 訓練語料輸出路徑 ] [ 測試語料輸出路徑 ]
```

 ----------------------------------------------------------------------------------------------------------

## 斷句模型選擇
```
./other_models.sh [ 斷句語料路徑 ]
```
 ----------------------------------------------------------------------------------------------------------

## 前後文範圍實驗
### CRF實驗
```
./crf_k.sh [ 斷句語料路徑 ]
```
### LSTM實驗
```
./lstm_k.sh [ 斷句語料路徑 ]
./lstm_bigram_k.sh [ 斷句語料路徑 ]
```
 ----------------------------------------------------------------------------------------------------------

## 輔助特徵選擇
### CRF實驗
```
./crf_feature.sh
```
### LSTM實驗
```
./lstm_feature.sh [ 斷句語料路徑 ]
```
 ----------------------------------------------------------------------------------------------------------

## 模型的資料量需求
### CRF實驗
```
./crf_data.sh [ 斷句語料路徑 ]
```
### LSTM實驗
```
./lstm_data.sh [ 斷句語料路徑 ]
```

## CRF的整合學習
### CRF-Bagging實驗
```
./bagging_k.sh [ 斷句語料路徑 ]
```
### CRF-Boost實驗
```
./boost_k.sh [ 斷句語料路徑 ]
```
 ----------------------------------------------------------------------------------------------------------

## LSTM的模型結構
### 字嵌入維度效果實驗
```
./w2v_size.sh* [ 斷句語料路徑 ]

```
### LSTM stack實驗
```
./lstm_stack.sh [ 斷句語料路徑 ]
```
### sequence to sequence實驗
```
./lstm_s2s.sh [ 斷句語料路徑 ]
```
 ----------------------------------------------------------------------------------------------------------

## CRF+LSTM的最佳整合
```
./crf_best.sh [ 訓練語料路徑 ]
./lstm_best.sh [ 訓練語料路徑 ]
./avg_ensemble.sh [ 訓練語料路徑 ] [ 測試語料路徑 ] [ 與測語料輸出路徑 ]
```
 ----------------------------------------------------------------------------------------------------------

## basic_learner
crf_basic.py  : CRF模型訓練工具
lstm_basic.py : LSTM模型訓練工具
 ----------------------------------------------------------------------------------------------------------

## data
### 唐代墓誌銘語料
epitaph_RAW.txt
### 中國佛教寺廟志語料
buddhist_info_RAW.txt
### 測試語料
data_lite_RAW.txt
### 小韻表
rhyme.txt

 ----------------------------------------------------------------------------------------------------------

## lib
arg.py              : 讀取程式參數
ensumble_learner.py : 產生 CRF 整合學習模型
crf.py              : 產生 CRF 模型
learner.py          : 訓練 CRF 模型
lstmlib.py          : 產生 LSTM 模型
data.py             : 產生斷句語料與文字分類
feature.py          : 產生特徵資料
crawer.py           : 抓取「韻典網」的小韻表資訊

 ----------------------------------------------------------------------------------------------------------

## pickles
rhyme_list.pkl : 小韻表的 python pickle 格式物件

 ----------------------------------------------------------------------------------------------------------

## ref
tang_name/                           : 唐代墓誌銘名詞表資料夾
tang_name/tangAddresses.clliu.txt    : 地名
tang_name/tangOffice.clliu.txt       : 官職
tang_name/tangReignperiods.clliu.txt : 年號
tang_name/all.txt                    : 合併以上三個名詞表的檔案

budd/                                : 佛典資料夾
budd/cjkve.txt                       : 佛典詞表1
budd/ddb.txt                         : 佛典詞表2
budd/all.txt                         : 合併以上兩個名詞表的檔案

 ----------------------------------------------------------------------------------------------------------
